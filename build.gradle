apply plugin: 'java'

wrapper {
    gradleVersion = '2.11'
}

repositories {
    jcenter()
}

configurations {
    integrationTestCompile.extendsFrom testCompile
    integrationTestRuntime.extendsFrom testRuntime
}

dependencies {
    compile group: 'commons-cli', name: 'commons-cli', version: '1.2'
    compile group: 'org.apache.ant', name: 'ant', version: '1.7.0'

    testCompile group: 'junit', name: 'junit', version: '4.8.2'
    testCompile group: 'easymock', name: 'easymock', version: '2.0'
    
    testRuntime group: 'mysql', name: 'mysql-connector-java', version: '5.1.29'
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
        resources {
            srcDir 'src'
        }
    }
    test {
        java {
            srcDirs 'unit_test_src', 'test_src'
        }
        resources {
            srcDir 'unit_test_src'
        }
    }
    integrationTest {
        java {
            srcDir 'test_src'
        }
        compileClasspath += sourceSets.main.output
        runtimeClasspath += sourceSets.main.output
    }
}

compileJava {
    options.encoding = 'ISO8859-1'
}

compileTestJava {
    options.encoding = 'ISO8859-1'
}

compileIntegrationTestJava {
    options.encoding = 'ISO8859-1'
}

task integrationTest(type: Test) {
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath = sourceSets.integrationTest.runtimeClasspath
}
